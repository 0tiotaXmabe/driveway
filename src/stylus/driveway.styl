@import 'bem'

// Import user configuration
c = json('../../driveway-config.json', {
  hash: true,
  leave-strings: true
})
$blocks   = c.blocks
$mods     = c.mods
$panelgap = unquote(c.panelGap)

/**
  * driveway.css - pure CSS masonry layouts aid.
*/

// Layout block
.{$blocks.layout.lbl}
  box-sizing   border-box
  column-count 1
  column-gap   0
  position     relative

  +mod($mods.focus)
    .{$blocks.panel.lbl}
      position relative
      &:hover
        z-index  3

      &:hover ~ .{$blocks.layout.lbl}__{$blocks.layout.els.focus-curtain}
        display block

  +el($blocks.layout.els.focus-curtain)
    background-color black
    bottom           0
    display          none
    left             0
    opacity          .75
    position         fixed
    right            0
    top              0
    z-index          2


  *
    box-sizing border-box

  @media(min-width: 768px)
    column-count 2

  @media(min-width: 1200px)
    column-count 3

// Panel block
.{$blocks.panel.lbl}
  margin 0
  padding $panelgap

  +mod($mods.focus)
    position relative

    &:hover
      z-index  3

    &:hover ~ .{$blocks.layout.lbl}__{$blocks.layout.els.focus-curtain}
      display block

  +mod($mods.pulse)
    transform-style preserve-3d
    perspective     1000
    transition      transform .25s ease 0s
    &:hover
      transform scale(1.02)

  @media (min-width: 768px)
    break-inside avoid

  +el($blocks.panel.els.content)
    border-radius 10px
    overflow      hidden
    padding       10px
    width         100%

    +mod($mods.image)
      max-width 100%
      padding 0


.{$blocks.flip.lbl}
  perspective 1000

  &:hover
    .{$blocks.flip.lbl}__{$blocks.flip.els.content}
      transform rotateY(180deg)

  +mod($mods.small)
    height 200px

  +mod($mods.medium)
    height 300px

  +mod($mods.large)
    height 400px

  +el($blocks.flip.els.panel)
    backface-visibility hidden
    border-radius       10px
    height              100%
    left                0
    overflow            hidden
    position            absolute
    top                 0
    width               100%

    +mod($mods.front)
      transform rotateY(0deg)
      z-index 2

    +mod($mods.back)
      transform rotateY(180deg)

  +el($blocks.flip.els.content)
    height          100%
    overflow        visible
    position        relative
    transform-style preserve-3d
    transition      .25s

.{$blocks.cluster.lbl}
  display flex
  padding 0

  +mod($mods.vertical)
    flex-direction column

    @media(min-width: 768px)
      flex-direction row

  +mod($mods.horizontal)
    flex-direction column

  +el($blocks.cluster.els.segment)
    display flex
    overflow hidden
    flex 1 1 auto

    +mod($mods.row)
      display flex
      flex-direction column

      @media(min-width: 768px)
        flex-direction row

    +mod($mods.column)
      flex-direction column

    @media(min-width: 768px)
      +mod($mods.half)
        flex-basis 50%

      +mod($mods.quarter)
        flex-basis 25%
